___________________________________________________________________________________________________________________
package com.example.myapplication

import android.os.Bundle
import android.widget.*
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.app.AlertDialog   // [A] AlertDialog(íŒì—…/ëª¨ë‹¬) ê¸°ëŠ¥ì„ ì“°ê¸° ìœ„í•œ import

class MainActivity : AppCompatActivity() { // [1] Activity = ì•±ì˜ â€œí•œ í™”ë©´â€. ìƒëª…ì£¼ê¸°(onCreate ë“±)ë¥¼ ê°€ì§

    private lateinit var editHourlyWage: EditText         // [2] lateinit: onCreateì—ì„œ findViewByIdë¡œ â€œë‚˜ì¤‘ì— ì´ˆê¸°í™”â€ ì•½ì†
    private lateinit var spinnerDailyHours: Spinner       // [3] Spinner: ë“œë¡­ë‹¤ìš´ ì„ íƒ UI (Adapterê°€ ë°ì´í„° ì—°ê²°)
    private lateinit var spinnerDaysPerWeek: Spinner
    private lateinit var spinnerOvertimeHours: Spinner
    private lateinit var spinnerHoliday: Spinner
    private lateinit var spinnerTax: Spinner
    private lateinit var spinnerProbation: Spinner
    private lateinit var btnCalc: Button                  // [4] Button: í´ë¦­ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°
    private lateinit var textResult: TextView             // [5] TextView: ê²°ê³¼ ì¶œë ¥ìš©

    override fun onCreate(savedInstanceState: Bundle?) {  // [6] onCreate: í™”ë©´ì´ â€œì²˜ìŒ ìƒì„±ë  ë•Œâ€ í•œ ë²ˆ í˜¸ì¶œë˜ëŠ” ì‹œì‘ì 
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)            // [7] ì´ Activityê°€ ì‚¬ìš©í•  XML ë ˆì´ì•„ì›ƒ ì§€ì •

        editHourlyWage = findViewById(R.id.editHourlyWage)      // [8] findViewById: XML ë·°ë¥¼ idë¡œ ì°¾ì•„ì„œ ë³€ìˆ˜ì— ì—°ê²°
        spinnerDailyHours = findViewById(R.id.spinnerDailyHours)
        spinnerDaysPerWeek = findViewById(R.id.spinnerDaysPerWeek)
        spinnerOvertimeHours = findViewById(R.id.spinnerOvertimeHours)
        spinnerHoliday = findViewById(R.id.spinnerHoliday)
        spinnerTax = findViewById(R.id.spinnerTax)
        spinnerProbation = findViewById(R.id.spinnerProbation)
        btnCalc = findViewById(R.id.btnCalc)
        textResult = findViewById(R.id.textResult)

        setupSpinners()                                   // [9] ì´ˆê¸°í™” í•¨ìˆ˜ ë¶„ë¦¬: onCreateë¥¼ ê¹”ë”í•˜ê²Œ(ê°€ë…ì„±/ìœ ì§€ë³´ìˆ˜)

        btnCalc.setOnClickListener {                      // [10] ì´ë²¤íŠ¸ ì²˜ë¦¬: ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë  ì½”ë“œ ë“±ë¡
            calcPay()
        }
    }

    private fun setupSpinners() {                          // [11] Spinnerì— ë“¤ì–´ê°ˆ â€œì„ íƒ ëª©ë¡â€ì„ ë§Œë“œëŠ” ê³³
        // 30ë¶„ ë‹¨ìœ„: 0.5ì‹œê°„ ~ 24ì‹œê°„
        val timeLabels = mutableListOf<String>()           // [12] MutableList: addë¡œ í•­ëª©ì„ ê³„ì† ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤íŠ¸
        for (i in 1..48) {                                 // [13] ë°˜ë³µë¬¸: 1~48 => 0.5ì‹œê°„ * 48 = 24ì‹œê°„
            val hours = i * 0.5                            // [14] 0.5 ë‹¨ìœ„ ê³„ì‚°(30ë¶„ ë‹¨ìœ„)
            val h = hours.toInt()                          // [15] toInt(): ì†Œìˆ˜ì  ë²„ë¦¼ìœ¼ë¡œ â€œì •ìˆ˜ ì‹œê°„â€ë§Œ ë½‘ìŒ
            val m = if (hours - h >= 0.5) 30 else 0        // [16] ì¡°ê±´ì‹: 0.5ê°€ ìˆìœ¼ë©´ 30ë¶„, ì•„ë‹ˆë©´ 0ë¶„

            val label = when {                             // [17] when: ì—¬ëŸ¬ ì¡°ê±´ ë¶„ê¸°(ê°€ë…ì„± ì¢‹ì€ switch ëŠë‚Œ)
                h == 0 && m == 30 -> "30ë¶„"
                m == 0 -> "${h}ì‹œê°„"                       // [18] ë¬¸ìì—´ í…œí”Œë¦¿: ${ë³€ìˆ˜}ë¥¼ ë¬¸ìì—´ ì•ˆì— ì‚½ì…
                else -> "${h}ì‹œê°„ 30ë¶„"
            }
            timeLabels.add(label)                          // [19] ë¦¬ìŠ¤íŠ¸ì— í•­ëª© ì¶”ê°€
        }

        val hoursAdapter = ArrayAdapter(                   // [20] Adapter: Spinnerê°€ â€œë¬´ìŠ¨ ëª©ë¡ì„ ë³´ì—¬ì¤„ì§€â€ ì—°ê²°í•´ì£¼ëŠ” ë‹¤ë¦¬
            this,                                          // [21] this: í˜„ì¬ Activity(Context). Adapter/Toast/Dialogì— í•„ìš”
            android.R.layout.simple_spinner_item,          // [22] ì•ˆë“œë¡œì´ë“œ ê¸°ë³¸ ì œê³µ Spinner ì•„ì´í…œ ë ˆì´ì•„ì›ƒ
            timeLabels
        ).apply {                                          // [23] apply: ê°ì²´ ìƒì„± í›„ ì„¤ì •ì„ ë¬¶ì–´ì„œ ì“°ëŠ” Kotlin ìŠ¤ì½”í”„ í•¨ìˆ˜
            setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item) // [24] ë“œë¡­ë‹¤ìš´ í¼ì³¤ì„ ë•Œ ë ˆì´ì•„ì›ƒ
        }

        spinnerDailyHours.adapter = hoursAdapter           // [25] Spinnerì— adapter ë¶™ì´ë©´ ëª©ë¡ì´ í™”ë©´ì— ëœ¸
        spinnerOvertimeHours.adapter = hoursAdapter

        val daysLabels = (1..7).map { "${it}ì¼" }          // [26] map: 1..7ì„ "1ì¼"~"7ì¼" ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
        val daysAdapter = ArrayAdapter(
            this,
            android.R.layout.simple_spinner_item,
            daysLabels
        ).apply {
            setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
        }
        spinnerDaysPerWeek.adapter = daysAdapter

        val holidayAdapter = ArrayAdapter(
            this,
            android.R.layout.simple_spinner_item,
            listOf("ë¯¸í¬í•¨", "í¬í•¨")                        // [27] listOf: ê³ ì • ë¦¬ìŠ¤íŠ¸(ë³€ê²½ í•„ìš” ì—†ëŠ” ì˜µì…˜)
        ).apply {
            setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
        }
        spinnerHoliday.adapter = holidayAdapter

        val taxAdapter = ArrayAdapter(
            this,
            android.R.layout.simple_spinner_item,
            listOf("ë¯¸ì ìš©", "ì†Œë“ì„¸ 3.3%")
        ).apply {
            setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
        }
        spinnerTax.adapter = taxAdapter

        val probationAdapter = ArrayAdapter(
            this,
            android.R.layout.simple_spinner_item,
            listOf("ë¯¸ì ìš©", "ì ìš©")
        ).apply {
            setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
        }
        spinnerProbation.adapter = probationAdapter
    }

    private fun calcPay() {                                 // [28] â€œì…ë ¥ê°’ ì½ê¸° â†’ ê³„ì‚° â†’ ê²°ê³¼ ì¶œë ¥â€ í•µì‹¬ ë¡œì§
        val hourlyText = editHourlyWage.text.toString()     // [29] EditTextì˜ ì…ë ¥ê°’ì€ text(Editable)ë¼ì„œ Stringìœ¼ë¡œ ë³€í™˜

        if (hourlyText.isBlank()) {                         // [30] ì…ë ¥ ê²€ì¦: ë¹ˆê°’ì´ë©´ ê³„ì‚° ëª» í•˜ê²Œ ë§‰ê¸°
            Toast.makeText(this, "ì‹œê¸‰ë¶€í„° ì…ë ¥í•´ë¼ ê²Œì´ì•¼", Toast.LENGTH_SHORT).show() // [31] Toast: ì§§ê²Œ ëœ¨ëŠ” ì•ˆë‚´ ë©”ì‹œì§€
            return                                          // [32] return: ì—¬ê¸°ì„œ í•¨ìˆ˜ ì¢…ë£Œ(ì•„ë˜ ê³„ì‚° ë¡œì§ ì‹¤í–‰ X)
        }

        val hourly = hourlyText.toDouble()                  // [33] String -> Double ë³€í™˜(ëˆ/ì‹œê°„ ê³„ì‚°ì€ ì†Œìˆ˜ ê°€ëŠ¥)

        val dailyHours = (spinnerDailyHours.selectedItemPosition + 1) * 0.5     // [34] ì„ íƒ ì¸ë±ìŠ¤(0ë¶€í„°) + 1 => 1~48ë‹¨ê³„
        val daysPerWeek = spinnerDaysPerWeek.selectedItemPosition + 1           // [35] 1~7ì¼
        val overtimeHoursPerMonth = (spinnerOvertimeHours.selectedItemPosition + 1) * 0.5 // [36] ì›” ì—°ì¥ê·¼ë¡œ ì‹œê°„(0.5ë‹¨ìœ„)

        val holidayOpt = spinnerHoliday.selectedItem.toString()                 // [37] selectedItem: í˜„ì¬ ì„ íƒëœ â€œë¬¸ìì—´â€
        val taxOpt = spinnerTax.selectedItem.toString()
        val probationOpt = spinnerProbation.selectedItem.toString()

        val weeksPerMonth = 4.345                         // [38] ì›” í™˜ì‚° ìƒìˆ˜(í‰ê· ì ìœ¼ë¡œ í•œ ë‹¬ì€ ì•½ 4.345ì£¼)

        val weeklyHours = dailyHours * daysPerWeek        // [39] ì£¼ë‹¹ ì´ ê·¼ë¡œì‹œê°„
        var baseMonthly = hourly * dailyHours * daysPerWeek * weeksPerMonth     // [40] ê¸°ë³¸ê¸‰(ì›” í™˜ì‚°)

        val overtimeMonthly = hourly * 1.5 * overtimeHoursPerMonth              // [41] ì—°ì¥ìˆ˜ë‹¹: í†µìƒ 1.5ë°°(ê°€ì •)

        var holidayMonthly = 0.0                           // [42] ì£¼íœ´ìˆ˜ë‹¹(ì¡°ê±´ ì¶©ì¡± ì‹œë§Œ ë”í•¨)
        if (holidayOpt == "í¬í•¨" && weeklyHours >= 15.0) {  // [43] ì¡°ê±´ë¬¸: ì£¼íœ´ëŠ” ë³´í†µ ì£¼ 15ì‹œê°„ ì´ìƒ ë“± ì¡°ê±´ì´ ìˆìŒ(ë„¤ ë¡œì§ ê¸°ì¤€)
            holidayMonthly = hourly * dailyHours * weeksPerMonth                // [44] ì£¼íœ´ìˆ˜ë‹¹ ê³„ì‚°(ë„¤ê°€ ì¡ì€ ë°©ì‹)
        }

        var total = baseMonthly + overtimeMonthly + holidayMonthly              // [45] ì´í•©(ì„¸ì „)

        if (probationOpt == "ì ìš©") {                       // [46] ìˆ˜ìŠµ ì ìš© ì‹œ 90% (ë„¤ ë¡œì§)
            total *= 0.9
        }

        val beforeTax = total                               // [47] ì„¸ì „ ê¸ˆì•¡
        var afterTax = beforeTax                            // [48] ì„¸í›„ ê¸ˆì•¡(ê¸°ë³¸ì€ ì„¸ì „=ì„¸í›„, ì„¸ê¸ˆ ì˜µì…˜ ì ìš©í•˜ë©´ ë°”ë€œ)
        var taxAmount = 0.0                                 // [49] ì„¸ê¸ˆ ê¸ˆì•¡

        if (taxOpt == "ì†Œë“ì„¸ 3.3%") {                      // [50] ì˜µì…˜ ê¸°ë°˜ ë¶„ê¸°(ì„¸ê¸ˆ ì ìš©/ë¯¸ì ìš©)
            taxAmount = beforeTax * 0.033
            afterTax = beforeTax - taxAmount
        }

        // ğŸ‘‰ ì—¬ê¸°ì„œë¶€í„° ê²°ê³¼ ë¬¸ìì—´ ë§Œë“¤ê¸°
        val resultText = """                               // [51] Kotlin ë©€í‹°ë¼ì¸ ë¬¸ìì—´(ë”°ì˜´í‘œ 3ê°œ): ì¤„ë°”ê¿ˆ í¬í•¨í•´ì„œ ì‘ì„± ê°€ëŠ¥
            â–¶ ì‹œê¸‰: ${hourly.toInt()}ì›
            â–¶ ì¼ì¼ ê·¼ë¬´ì‹œê°„: ${spinnerDailyHours.selectedItem}
            â–¶ ì£¼ë‹¹ ê·¼ë¬´ì¼ìˆ˜: ${daysPerWeek}ì¼
            â–¶ ì›” ì—°ì¥ê·¼ë¡œ: ${spinnerOvertimeHours.selectedItem}
            â–¶ ì£¼íœ´ìˆ˜ë‹¹: $holidayOpt
            â–¶ ì„¸ê¸ˆ: $taxOpt
            â–¶ ìˆ˜ìŠµ: $probationOpt

            ê¸°ë³¸ê¸‰(ì„¸ì „): ${baseMonthly.toInt()}ì›
            ì—°ì¥ìˆ˜ë‹¹: ${overtimeMonthly.toInt()}ì›
            ì£¼íœ´ìˆ˜ë‹¹: ${holidayMonthly.toInt()}ì›

            í•©ê³„(ì„¸ì „): ${beforeTax.toInt()}ì›
            ì„¸ê¸ˆ: ${taxAmount.toInt()}ì›
            ì‹¤ìˆ˜ë ¹(ì„¸í›„): ${afterTax.toInt()}ì›
        """.trimIndent()                                    // [52] trimIndent: ë©€í‹°ë¼ì¸ ë¬¸ìì—´ì˜ ë“¤ì—¬ì“°ê¸° ì •ë¦¬(ë³´ê¸° ì¢‹ê²Œ)

        textResult.text = resultText                         // [53] UI ì—…ë°ì´íŠ¸: TextViewì— ê²°ê³¼ ì¶œë ¥

        AlertDialog.Builder(this)                            // [54] AlertDialog: íŒì—… ëª¨ë‹¬ ìƒì„±(ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ë¥¼ â€œê°•í•˜ê²Œâ€ ë³´ì—¬ì¤Œ)
            .setTitle("TEAM ANDROID ê³„ì‚° ê²°ê³¼")              // [55] íŒì—… ì œëª©
            .setMessage(resultText)                          // [56] íŒì—… ë‚´ìš©(ê²°ê³¼ ë¬¸ìì—´)
            .setPositiveButton("í™•ì¸", null)                 // [57] í™•ì¸ ë²„íŠ¼(ëˆ„ë¥´ë©´ ë‹«í˜). null=ì¶”ê°€ ë™ì‘ ì—†ìŒ
            .show()                                          // [58] ì‹¤ì œ í™”ë©´ì— ë„ìš°ê¸°
    }
}

/*
[ê°ì£¼ ìš”ì•½]
[1] Activity/ìƒëª…ì£¼ê¸°, [2] lateinit, [3] Spinner, [4] Button, [5] TextView
[7] setContentView, [8] findViewById, [10] í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
[20] Adapter(ArrayAdapter), [23] apply, [26] map, [29] EditText ì…ë ¥ ì½ê¸°
[30] ì…ë ¥ ê²€ì¦ + return, [31] Toast ì•ˆë‚´
[34~36] selectedItemPositionìœ¼ë¡œ 0.5 ë‹¨ìœ„ ê°’ ë§Œë“¤ê¸°
[38] ì›” í™˜ì‚° ìƒìˆ˜, [41] ì—°ì¥ 1.5ë°°, [43] ì¡°ê±´ë¬¸ìœ¼ë¡œ ì£¼íœ´ ì ìš©, [50] ì˜µì…˜ ë¶„ê¸°(ì„¸ê¸ˆ)
[51~52] ë©€í‹°ë¼ì¸ ë¬¸ìì—´ + trimIndent, [53] UI ë°˜ì˜, [54~58] AlertDialogë¡œ íŒì—… ì¶œë ¥
*/
_______________________________________________________________________   XML   ___________________________________________________________________________________
<?xml version="1.0" encoding="utf-8"?>
<!-- [X1] XML ì„ ì–¸: ì´ íŒŒì¼ì´ XMLì´ê³  UTF-8 ì¸ì½”ë”©ì´ë¼ëŠ” ëœ» -->

<!-- [X2] ScrollView: í™”ë©´ì´ ê¸¸ì–´ì§€ë©´ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ì»¨í…Œì´ë„ˆ -->
<!-- [X3] match_parent: ë¶€ëª¨(í™”ë©´) í¬ê¸°ë§Œí¼ ê½‰ ì±„ì›€ -->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- [X4] LinearLayout: ìì‹ ë·°ë“¤ì„ ì„¸ë¡œë¡œ ìŒ“ê¸° -->
    <!-- [X5] wrap_content: ë‚´ìš©ë§Œí¼ë§Œ ë†’ì´ -->
    <!-- [X6] orientation=vertical: ìœ„ì—ì„œ ì•„ë˜ë¡œ ë°°ì¹˜ -->
    <!-- [X7] padding=16dp: ë°”ê¹¥ ì—¬ë°±(í™”ë©´ ë°€ë„ì— ë”°ë¼ ë³´ì •ë˜ëŠ” dp ë‹¨ìœ„) -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <!-- [X8] TextView(íŒ€ëª… í—¤ë”): ê°€ìš´ë° ì •ë ¬ + êµµê²Œ + í° ê¸€ì”¨ -->
        <TextView
            android:id="@+id/textTeamName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="TEAM ANDROID"
            android:textSize="20sp"
            android:textStyle="bold"
            android:gravity="center"
            android:padding="12dp" />

        <!-- [X9] ë¼ë²¨ TextView: ì•„ë˜ ì…ë ¥ì¹¸ì´ ë­”ì§€ ì„¤ëª…í•˜ëŠ” ìš©ë„ -->
        <TextView
            android:text="ì‹œê¸‰ (ì›)"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <!-- [X10] EditText: ì‹œê¸‰ ì…ë ¥ -->
        <!-- [X11] hint: ì…ë ¥ ì „ ì•ˆë‚´ë¬¸(íšŒìƒ‰) -->
        <!-- [X12] inputType=number: ìˆ«ì í‚¤ë³´ë“œ + ìˆ«ì ì…ë ¥ ìœ ë„ -->
        <EditText
            android:id="@+id/editHourlyWage"
            android:hint="ì˜ˆ) 10030"
            android:inputType="number"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="ì¼ì¼ ê·¼ë¬´ì‹œê°„"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <!-- [X13] Spinner: ë“œë¡­ë‹¤ìš´ ì„ íƒ(ì½”ë“œì—ì„œ Adapterë¡œ ëª©ë¡ ì—°ê²°ë¨) -->
        <Spinner
            android:id="@+id/spinnerDailyHours"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="ì£¼ë‹¹ ê·¼ë¬´ì¼ìˆ˜"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <Spinner
            android:id="@+id/spinnerDaysPerWeek"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="ì›” ì—°ì¥ ê·¼ë¬´ì‹œê°„"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <Spinner
            android:id="@+id/spinnerOvertimeHours"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="ì£¼íœ´ìˆ˜ë‹¹"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <Spinner
            android:id="@+id/spinnerHoliday"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="ì„¸ê¸ˆ"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <Spinner
            android:id="@+id/spinnerTax"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="ìˆ˜ìŠµ ì—¬ë¶€"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <Spinner
            android:id="@+id/spinnerProbation"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <!-- [X14] Button: í´ë¦­ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°(ì½”ë“œì—ì„œ setOnClickListenerë¡œ calcPay ì‹¤í–‰) -->
        <Button
            android:id="@+id/btnCalc"
            android:text="ê³„ì‚°í•˜ê¸°"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <!-- [X15] TextView: ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <TextView
            android:id="@+id/textResult"
            android:text="ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤"
            android:textSize="16sp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

    </LinearLayout>
</ScrollView>
